<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>懒加载</title>
  </head>
  <style>
    .girls-list-wrap {
      width: 300px;
    }
    img {
      width: 300px;
      height: 300px;
    }
  </style>
  <body>
    <div class="girls-list-wrap">
      <img
        data-src="https://pics7.baidu.com/feed/95eef01f3a292df5775bf609ab4d266635a87390.jpeg?token=1fcaaeeb022227cec946b748b3b475de"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://pics2.baidu.com/feed/55e736d12f2eb93886f49df2cfc6ff33e4dd6fbb.jpeg?token=3685b7bbb1d73f7623495196244f1aa2&s=E523B0564CE908827C927FC90300A09C"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />

      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279383100&di=8f7c02368324f2f3ec98666664fe3389&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F7d886d8d7691d343b4a3c26766e4617ff13ffffc36f64-QJR8ZT_fw658"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279457437&di=5656201d77aa1e6c48690a34d5d8354c&imgtype=0&src=http%3A%2F%2Fimg1.imgtn.bdimg.com%2Fit%2Fu%3D1989055861%2C3913700917%26fm%3D214%26gp%3D0.jpg"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />

      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507516&di=761a784c74d8ff104764f8359bc45110&imgtype=0&src=http%3A%2F%2Fimage.biaobaiju.com%2Fuploads%2F20191101%2F15%2F1572593118-rRPwKXJZcd.jpg"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507517&di=06befbfba60de62c3dd930699159989c&imgtype=0&src=http%3A%2F%2Fwww.17qq.com%2Fimg_qqtouxiang%2F89417859.jpeg"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />

      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507514&di=bee982bb973b51811df8e2e439279a5d&imgtype=0&src=http%3A%2F%2Ft9.baidu.com%2Fit%2Fu%3D4137625703%2C3687810423%26fm%3D191%26app%3D48%26wm%3D1%2C17%2C90%2C45%2C20%2C7%26wmo%3D0%2C0%26n%3D0%26g%3D0n%26f%3DJPEG%3Fsec%3D1853310920%26t%3Dab236206be0bf72302492fe291498dee"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3998737228,4272807200&fm=26&gp=0.jpg"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />

      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507511&di=80d9338229f6b8642a00af5bed1c0ca5&imgtype=0&src=http%3A%2F%2Finews.gtimg.com%2Fnewsapp_bt%2F0%2F11209516896%2F1000.jpg"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507511&di=b86230df5fb90468930209a35a4c5575&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F612cb6422ab446cbb98cdc92d08a90d98927ee1739b41-HIwkOB_fw658"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
      <img
        data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586279507510&di=dea0fc0cafe5d389a3099449b4e23ad4&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F31b9f635874a7686eb2951491f4661d6e4028112b0b9-5u09uS_fw658"
        src="https://img.alicdn.com/tps/i3/T1QYOyXqRaXXaY1rfd-32-32.gif"
      />
    </div>
  </body>
  <script>
    const io = new IntersectionObserver(callback);
    let imgs = document.querySelectorAll("[data-src]"); // 将图片的真实url设置为data-src src属性为占位图 元素可见时候替换src
    function callback(entries) {
      entries.forEach((item) => {
        // 遍历entries数组
        if (item.isIntersecting) {
          // // 当前元素可见
          item.target.src = item.target.dataset.src; // 替换src
          io.unobserve(item.target); // 停止观察当前元素 避免不可见时候再次调用callback函数
        }
      });
    }

    // io.observe接受一个DOM元素，添加多个监听 使用forEach
    imgs.forEach((item) => {
      io.observe(item);
    });
  </script>
</html>
